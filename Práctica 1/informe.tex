\documentclass[11pt,leqno]{article}
\usepackage[spanish,activeacute]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amsfonts}
\usepackage{enumerate}
\usepackage{listings}
\usepackage{amsthm}
\usepackage[pdftex]{hyperref} 
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{pgfplotstable}
\usepackage{verbatim}
\usepackage{geometry}
\usepackage{changepage}

\author{Jacinto Carrasco Castillo}
\title{Metaheurísticas. Búsqueda por trayectorias para el problema de la selección de características}

\newcommand{\maketable}[1]{
\begin{adjustwidth}{-1cm}{}
\resizebox{\linewidth}{!}{
\pgfplotstabletypeset[
	every head row/.style={
		before row={%
				\hline
				& \multicolumn{4}{c|}{WDBC} & \multicolumn{4}{c|}{Movement Libras} & \multicolumn{4}{c|}{Arrythmia}\\
				\hline
		},
		after row=\hline\hline
	},
	column type/.add={}{|},
	every last row/.style={before row =\hline\hline, after row=\hline},
	every first column/.style={ column type/.add={|}{} },
	columns/0/.style={column name = , string type},
	columns/tA/.style={column name =T},
	columns/tL/.style={column name =T},
	columns/inL/.style={column name =\%Clas. in},	
	columns/inA/.style={column name =\%Clas. in},	
	columns/outL/.style={column name =\%Clas. out},	
	columns/outA/.style={column name =\%Clas. out},
	columns/redL/.style={column name =\%red},	
	columns/redA/.style={column name =\%red},
	precision=4
	]{#1}
}
\end{adjustwidth}
}

\newcommand{\makeresume}[4]{
\pgfplotstablevertcat{#1}{#2}
\pgfplotstablecreatecol[copy column from table={#3}{[index] 1}]{inL} {#1}
\pgfplotstablecreatecol[copy column from table={#3}{[index] 2}]{outL} {#1}
\pgfplotstablecreatecol[copy column from table={#3}{[index] 3}]{redL} {#1}
\pgfplotstablecreatecol[copy column from table={#3}{[index] 4}]{tL} {#1}
\pgfplotstablecreatecol[copy column from table={#4}{[index] 1}]{inA} {#1}
\pgfplotstablecreatecol[copy column from table={#4}{[index] 2}]{outA} {#1}
\pgfplotstablecreatecol[copy column from table={#4}{[index] 3}]{redA} {#1}
\pgfplotstablecreatecol[copy column from table={#4}{[index] 4}]{tA} {#1}
}

\begin{document}

% Tablas KNN
\pgfplotstableread[col sep=comma]{Resultados/wKNN.csv}\datawKNN
\pgfplotstableread[col sep=comma]{Resultados/lKNN.csv}\datalKNN
\pgfplotstableread[col sep=comma]{Resultados/aKNN.csv}\dataaKNN

\begin{comment}
% Tablas Greedy SFS
\pgfplotstableread{Resultados/wSFS.csv}\datawSFS
\pgfplotstableread{Resultados/lSFS.csv}\datalSFS
\pgfplotstableread{Resultados/aSFS.csv}\dataaSFS

% Tablas Local Search
\pgfplotstableread{Resultados/wLS.csv}\datawLS
\pgfplotstableread{Resultados/lLS.csv}\datalLS
\pgfplotstableread{Resultados/aLS.csv}\dataaLS

% Tablas Simulated Annealing
\pgfplotstableread{Resultados/wSA.csv}\datawSA
\pgfplotstableread{Resultados/lSA.csv}\datalSA
\pgfplotstableread{Resultados/aSA.csv}\dataaSA

% Tablas Tabu Search
\pgfplotstableread{Resultados/wTS.csv}\datawTS
\pgfplotstableread{Resultados/lTS.csv}\datalTS
\pgfplotstableread{Resultados/aTS.csv}\dataaTS

\end{comment}

% Tablas Resumen KNN
\makeresume{\dataKNN}{\datawKNN}{\datalKNN}{\dataaKNN}

% Salida por pantalla
\maketable{\dataKNN}



\end{document}
